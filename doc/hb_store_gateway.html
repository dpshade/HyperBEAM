<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.35.1">
    <meta name="project" content="hb v0.0.1">


    <title>hb_store_gateway â€” hb v0.0.1</title>
    <link rel="stylesheet" href="dist/html-erlang-4IXSOGMD.css" />


    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-K7URE6B4.js"></script>
    <script src="dist/sidebar_items-BF2C6ECE.js"></script>
    <script src="docs_config.js"></script>
    <script async src="dist/html-PVRIOB7F.js"></script>

  </head>
  <body data-type="modules" class="page-module">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

      <div>
        <a href="readme.html" class="sidebar-projectName" translate="no">
hb
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v0.0.1
        </div>
      </div>
    </div>
    <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
      <li>
        <button id="extras-list-tab-button" role="tab" data-type="extras" aria-controls="extras-tab-panel" aria-selected="true" tabindex="0">
Pages
        </button>
      </li>

        <li>
          <button id="modules-list-tab-button" role="tab" data-type="modules" aria-controls="modules-tab-panel" aria-selected="false" tabindex="-1">
            Modules
          </button>
        </li>


    </ul>
  </div>

  <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
    <ul id="extras-full-list" class="full-list"></ul>
  </div>

    <div id="modules-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="modules-list-tab-button" hidden>
      <ul id="modules-full-list" class="full-list"></ul>
    </div>


</nav>

<main class="content">
  <output role="status" id="toast"></output>

  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of hb</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search">
            <i class="ri-search-2-line ri-lg" aria-hidden="true" title="Submit search"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <h1>

      <a href="https://github.com/permaweb/HyperBEAM/blob/v0.0.1/src/hb_store_gateway.erl#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

    <span translate="no">hb_store_gateway</span> 
    <small class="app-vsn" translate="no">(hb v0.0.1)</small>

  </h1>


    <section id="moduledoc">
<p>A store module that reads data from the nodes Arweave gateway and 
GraphQL routes, additionally including additional store-specific routes.</p>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#cache_read_message_test/0" data-no-tooltip translate="no">cache_read_message_test()</a>

      </div>

        <div class="summary-synopsis"><p>Ensure that saving to the gateway store works.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#external_http_access_test/0" data-no-tooltip translate="no">external_http_access_test()</a>

      </div>

        <div class="summary-synopsis"><p>Test that the default node config allows for data to be accessed.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#graphql_as_store_test_/0" data-no-tooltip translate="no">graphql_as_store_test_()</a>

      </div>

        <div class="summary-synopsis"><p>Store is accessible via the default options.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#graphql_from_cache_test/0" data-no-tooltip translate="no">graphql_from_cache_test()</a>

      </div>

        <div class="summary-synopsis"><p>Stored messages are accessible via <code class="inline">hb_cache</code> accesses.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#list/2" data-no-tooltip translate="no">list(StoreOpts, Key)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#manual_local_cache_test/0" data-no-tooltip translate="no">manual_local_cache_test()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#read/2" data-no-tooltip translate="no">read(StoreOpts, Key)</a>

      </div>

        <div class="summary-synopsis"><p>Read the data at the given key from the GraphQL route. Will only attempt
to read the data if the key is an ID.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#resolve/2" data-no-tooltip translate="no">resolve/2</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#resolve_on_gateway_test_/0" data-no-tooltip translate="no">resolve_on_gateway_test_()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#scope/1" data-no-tooltip translate="no">scope/1</a>

      </div>

        <div class="summary-synopsis"><p>The scope of a GraphQL store is always remote, due to performance.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#specific_route_test/0" data-no-tooltip translate="no">specific_route_test()</a>

      </div>

        <div class="summary-synopsis"><p>Routes can be specified in the options, overriding the default routes.
We test this by inversion: If the above cache read test works, then we know 
that the default routes allow access to the item. If the test below were to
produce the same result, despite an empty 'only' route list, then we would
know that the module is not respecting the route list.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#type/2" data-no-tooltip translate="no">type(StoreOpts, Key)</a>

      </div>

        <div class="summary-synopsis"><p>Get the type of the data at the given key. We potentially cache the
result, so that we don't have to read the data from the GraphQL route
multiple times.</p></div>

    </div>

</div>

  </section>


  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="cache_read_message_test/0">

  <div class="detail-header">
    <a href="#cache_read_message_test/0" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">cache_read_message_test()</h1>

      <a href="https://github.com/permaweb/HyperBEAM/blob/v0.0.1/src/hb_store_gateway.erl#L145" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

<p>Ensure that saving to the gateway store works.</p>
  </section>
</section>
<section class="detail" id="external_http_access_test/0">

  <div class="detail-header">
    <a href="#external_http_access_test/0" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">external_http_access_test()</h1>

      <a href="https://github.com/permaweb/HyperBEAM/blob/v0.0.1/src/hb_store_gateway.erl#L197" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

<p>Test that the default node config allows for data to be accessed.</p>
  </section>
</section>
<section class="detail" id="graphql_as_store_test_/0">

  <div class="detail-header">
    <a href="#graphql_as_store_test_/0" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">graphql_as_store_test_()</h1>

      <a href="https://github.com/permaweb/HyperBEAM/blob/v0.0.1/src/hb_store_gateway.erl#L96" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

<p>Store is accessible via the default options.</p>
  </section>
</section>
<section class="detail" id="graphql_from_cache_test/0">

  <div class="detail-header">
    <a href="#graphql_from_cache_test/0" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">graphql_from_cache_test()</h1>

      <a href="https://github.com/permaweb/HyperBEAM/blob/v0.0.1/src/hb_store_gateway.erl#L111" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

<p>Stored messages are accessible via <code class="inline">hb_cache</code> accesses.</p>
  </section>
</section>
<section class="detail" id="list/2">

  <div class="detail-header">
    <a href="#list/2" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">list(StoreOpts, Key)</h1>

      <a href="https://github.com/permaweb/HyperBEAM/blob/v0.0.1/src/hb_store_gateway.erl#L16" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="manual_local_cache_test/0">

  <div class="detail-header">
    <a href="#manual_local_cache_test/0" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">manual_local_cache_test()</h1>

      <a href="https://github.com/permaweb/HyperBEAM/blob/v0.0.1/src/hb_store_gateway.erl#L122" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="read/2">

  <div class="detail-header">
    <a href="#read/2" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">read(StoreOpts, Key)</h1>

      <a href="https://github.com/permaweb/HyperBEAM/blob/v0.0.1/src/hb_store_gateway.erl#L47" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

<p>Read the data at the given key from the GraphQL route. Will only attempt
to read the data if the key is an ID.</p>
  </section>
</section>
<section class="detail" id="resolve/2">

  <div class="detail-header">
    <a href="#resolve/2" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">resolve/2</h1>

      <a href="https://github.com/permaweb/HyperBEAM/blob/v0.0.1/src/hb_store_gateway.erl#L14" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="resolve_on_gateway_test_/0">

  <div class="detail-header">
    <a href="#resolve_on_gateway_test_/0" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">resolve_on_gateway_test_()</h1>

      <a href="https://github.com/permaweb/HyperBEAM/blob/v0.0.1/src/hb_store_gateway.erl#L218" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="scope/1">

  <div class="detail-header">
    <a href="#scope/1" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">scope/1</h1>

      <a href="https://github.com/permaweb/HyperBEAM/blob/v0.0.1/src/hb_store_gateway.erl#L13" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

<p>The scope of a GraphQL store is always remote, due to performance.</p>
  </section>
</section>
<section class="detail" id="specific_route_test/0">

  <div class="detail-header">
    <a href="#specific_route_test/0" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">specific_route_test()</h1>

      <a href="https://github.com/permaweb/HyperBEAM/blob/v0.0.1/src/hb_store_gateway.erl#L175" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

<p>Routes can be specified in the options, overriding the default routes.
We test this by inversion: If the above cache read test works, then we know 
that the default routes allow access to the item. If the test below were to
produce the same result, despite an empty 'only' route list, then we would
know that the module is not respecting the route list.</p>
  </section>
</section>
<section class="detail" id="type/2">

  <div class="detail-header">
    <a href="#type/2" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">type(StoreOpts, Key)</h1>

      <a href="https://github.com/permaweb/HyperBEAM/blob/v0.0.1/src/hb_store_gateway.erl#L27" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

<p>Get the type of the data at the given key. We potentially cache the
result, so that we don't have to read the data from the GraphQL route
multiple times.</p>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

          <span class="line">
            <a href="https://hex.pm/packages/hb/0.0.1" class="footer-hex-package">Hex Package</a>

            <a href="https://preview.hex.pm/preview/hb/0.0.1">Hex Preview</a>

          </span>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="hb.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.35.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>
