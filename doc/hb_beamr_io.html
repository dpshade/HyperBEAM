<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.35.1">
    <meta name="project" content="hb v0.0.1">


    <title>hb_beamr_io â€” hb v0.0.1</title>
    <link rel="stylesheet" href="dist/html-erlang-4IXSOGMD.css" />


    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-K7URE6B4.js"></script>
    <script src="dist/sidebar_items-BF2C6ECE.js"></script>
    <script src="docs_config.js"></script>
    <script async src="dist/html-PVRIOB7F.js"></script>

  </head>
  <body data-type="modules" class="page-module">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

      <div>
        <a href="readme.html" class="sidebar-projectName" translate="no">
hb
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v0.0.1
        </div>
      </div>
    </div>
    <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
      <li>
        <button id="extras-list-tab-button" role="tab" data-type="extras" aria-controls="extras-tab-panel" aria-selected="true" tabindex="0">
Pages
        </button>
      </li>

        <li>
          <button id="modules-list-tab-button" role="tab" data-type="modules" aria-controls="modules-tab-panel" aria-selected="false" tabindex="-1">
            Modules
          </button>
        </li>


    </ul>
  </div>

  <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
    <ul id="extras-full-list" class="full-list"></ul>
  </div>

    <div id="modules-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="modules-list-tab-button" hidden>
      <ul id="modules-full-list" class="full-list"></ul>
    </div>


</nav>

<main class="content">
  <output role="status" id="toast"></output>

  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of hb</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search">
            <i class="ri-search-2-line ri-lg" aria-hidden="true" title="Submit search"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <h1>

      <a href="https://github.com/permaweb/HyperBEAM/blob/v0.0.1/src/hb_beamr_io.erl#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

    <span translate="no">hb_beamr_io</span> 
    <small class="app-vsn" translate="no">(hb v0.0.1)</small>

  </h1>


    <section id="moduledoc">
<p>Simple interface for memory management for Beamr instances.
It allows for reading and writing to memory, as well as allocating and 
freeing memory by calling the WASM module's exported malloc and free
functions.</p><p>Unlike the majority of HyperBEAM modules, this module takes a defensive
approach to type checking, breaking from the conventional Erlang style, 
such that failures are caught in the Erlang-side of functions rather than
in the C/WASM-side.</p>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#free/2" data-no-tooltip translate="no">free(WASM, Ptr)</a>

      </div>

        <div class="summary-synopsis"><p>Free space allocated in the Beamr instance's native memory via a
call to the exported free function from the WASM.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#malloc/2" data-no-tooltip translate="no">malloc(WASM, Size)</a>

      </div>

        <div class="summary-synopsis"><p>Allocate space for (via an exported malloc function from the WASM) in 
the Beamr instance's native memory.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#malloc_test/0" data-no-tooltip translate="no">malloc_test()</a>

      </div>

        <div class="summary-synopsis"><p>Test allocating and freeing memory.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#read/3" data-no-tooltip translate="no">read(WASM, Offset, Size)</a>

      </div>

        <div class="summary-synopsis"><p>Read a binary from the Beamr instance's native memory at a given offset
and of a given size.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#read_string/2" data-no-tooltip translate="no">read_string(Port, Offset)</a>

      </div>

        <div class="summary-synopsis"><p>Simple helper function to read a string from the Beamr instance's native
memory at a given offset. Memory is read by default in chunks of 8 bytes,
but this can be overridden by passing a different chunk size. Strings are 
assumed to be null-terminated.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#read_test/0" data-no-tooltip translate="no">read_test()</a>

      </div>

        <div class="summary-synopsis"><p>Test reading memory in and out of bounds.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#size/1" data-no-tooltip translate="no">size(WASM)</a>

      </div>

        <div class="summary-synopsis"><p>Get the size (in bytes) of the native memory allocated in the Beamr
instance. Note that WASM memory can never be reduced once granted to an
instance (although it can, of course, be reallocated <em>inside</em> the 
environment).</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#size_test/0" data-no-tooltip translate="no">size_test()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#string_write_and_read_test/0" data-no-tooltip translate="no">string_write_and_read_test()</a>

      </div>

        <div class="summary-synopsis"><p>Write and read strings to memory.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#write/3" data-no-tooltip translate="no">write(WASM, Offset, Data)</a>

      </div>

        <div class="summary-synopsis"><p>Write a binary to the Beamr instance's native memory at a given offset.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#write_string/2" data-no-tooltip translate="no">write_string/2</a>

      </div>

        <div class="summary-synopsis"><p>Simple helper function to allocate space for (via malloc) and write a
string to the Beamr instance's native memory. This can be helpful for easily
pushing a string into the instance, such that the resulting pointer can be
passed to exported functions from the instance.
Assumes that the input is either an iolist or a binary, adding a null byte
to the end of the string.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#write_test/0" data-no-tooltip translate="no">write_test()</a>

      </div>

        <div class="summary-synopsis"><p>Test writing memory in and out of bounds.</p></div>

    </div>

</div>

  </section>


  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="free/2">

  <div class="detail-header">
    <a href="#free/2" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">free(WASM, Ptr)</h1>

      <a href="https://github.com/permaweb/HyperBEAM/blob/v0.0.1/src/hb_beamr_io.erl#L134" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

<p>Free space allocated in the Beamr instance's native memory via a
call to the exported free function from the WASM.</p>
  </section>
</section>
<section class="detail" id="malloc/2">

  <div class="detail-header">
    <a href="#malloc/2" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">malloc(WASM, Size)</h1>

      <a href="https://github.com/permaweb/HyperBEAM/blob/v0.0.1/src/hb_beamr_io.erl#L118" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

<p>Allocate space for (via an exported malloc function from the WASM) in 
the Beamr instance's native memory.</p>
  </section>
</section>
<section class="detail" id="malloc_test/0">

  <div class="detail-header">
    <a href="#malloc_test/0" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">malloc_test()</h1>

      <a href="https://github.com/permaweb/HyperBEAM/blob/v0.0.1/src/hb_beamr_io.erl#L188" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

<p>Test allocating and freeing memory.</p>
  </section>
</section>
<section class="detail" id="read/3">

  <div class="detail-header">
    <a href="#read/3" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">read(WASM, Offset, Size)</h1>

      <a href="https://github.com/permaweb/HyperBEAM/blob/v0.0.1/src/hb_beamr_io.erl#L74" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

<p>Read a binary from the Beamr instance's native memory at a given offset
and of a given size.</p>
  </section>
</section>
<section class="detail" id="read_string/2">

  <div class="detail-header">
    <a href="#read_string/2" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">read_string(Port, Offset)</h1>

      <a href="https://github.com/permaweb/HyperBEAM/blob/v0.0.1/src/hb_beamr_io.erl#L100" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

<p>Simple helper function to read a string from the Beamr instance's native
memory at a given offset. Memory is read by default in chunks of 8 bytes,
but this can be overridden by passing a different chunk size. Strings are 
assumed to be null-terminated.</p>
  </section>
</section>
<section class="detail" id="read_test/0">

  <div class="detail-header">
    <a href="#read_test/0" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">read_test()</h1>

      <a href="https://github.com/permaweb/HyperBEAM/blob/v0.0.1/src/hb_beamr_io.erl#L175" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

<p>Test reading memory in and out of bounds.</p>
  </section>
</section>
<section class="detail" id="size/1">

  <div class="detail-header">
    <a href="#size/1" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">size(WASM)</h1>

      <a href="https://github.com/permaweb/HyperBEAM/blob/v0.0.1/src/hb_beamr_io.erl#L26" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

<p>Get the size (in bytes) of the native memory allocated in the Beamr
instance. Note that WASM memory can never be reduced once granted to an
instance (although it can, of course, be reallocated <em>inside</em> the 
environment).</p>
  </section>
</section>
<section class="detail" id="size_test/0">

  <div class="detail-header">
    <a href="#size_test/0" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">size_test()</h1>

      <a href="https://github.com/permaweb/HyperBEAM/blob/v0.0.1/src/hb_beamr_io.erl#L145" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="string_write_and_read_test/0">

  <div class="detail-header">
    <a href="#string_write_and_read_test/0" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">string_write_and_read_test()</h1>

      <a href="https://github.com/permaweb/HyperBEAM/blob/v0.0.1/src/hb_beamr_io.erl#L201" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

<p>Write and read strings to memory.</p>
  </section>
</section>
<section class="detail" id="write/3">

  <div class="detail-header">
    <a href="#write/3" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">write(WASM, Offset, Data)</h1>

      <a href="https://github.com/permaweb/HyperBEAM/blob/v0.0.1/src/hb_beamr_io.erl#L36" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

<p>Write a binary to the Beamr instance's native memory at a given offset.</p>
  </section>
</section>
<section class="detail" id="write_string/2">

  <div class="detail-header">
    <a href="#write_string/2" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">write_string/2</h1>

      <a href="https://github.com/permaweb/HyperBEAM/blob/v0.0.1/src/hb_beamr_io.erl#L56" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

<p>Simple helper function to allocate space for (via malloc) and write a
string to the Beamr instance's native memory. This can be helpful for easily
pushing a string into the instance, such that the resulting pointer can be
passed to exported functions from the instance.
Assumes that the input is either an iolist or a binary, adding a null byte
to the end of the string.</p>
  </section>
</section>
<section class="detail" id="write_test/0">

  <div class="detail-header">
    <a href="#write_test/0" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">write_test()</h1>

      <a href="https://github.com/permaweb/HyperBEAM/blob/v0.0.1/src/hb_beamr_io.erl#L161" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

<p>Test writing memory in and out of bounds.</p>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

          <span class="line">
            <a href="https://hex.pm/packages/hb/0.0.1" class="footer-hex-package">Hex Package</a>

            <a href="https://preview.hex.pm/preview/hb/0.0.1">Hex Preview</a>

          </span>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="hb.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.35.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>
